<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive 3D Scene - Multiple Elements</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Basic reset and body styling */
        body {
            margin: 0;
            overflow: hidden; /* Prevent scrollbars */
            font-family: 'Inter', sans-serif;
            background-color: #111; /* Dark background */
            color: #eee;
        }
        /* Style the canvas to fill the screen */
        #three-canvas {
            display: block;
            width: 100vw;
            height: 100vh;
        }
        /* Optional: Add a simple overlay for text */
        .info-overlay {
            position: absolute;
            top: 15px;
            left: 15px;
            padding: 10px 15px;
            background-color: rgba(0, 0, 0, 0.5);
            border-radius: 8px;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <canvas id="three-canvas"></canvas>

    <div class="info-overlay">
        Drag mouse / touch to rotate
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <script>
        // Ensure the script runs after the DOM is fully loaded
        window.onload = function() {
            let scene, camera, renderer, cube, sphere, torusKnot, controls; // Added sphere and torusKnot

            // --- Initialization ---
            function init() {
                try {
                    // 1. Scene: Container for all objects, lights, cameras
                    scene = new THREE.Scene();
                    scene.background = new THREE.Color(0x111111); // Match body background

                    // 2. Camera: Defines the viewpoint
                    camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
                    camera.position.z = 8; // Moved camera back a bit more to see all objects

                    // 3. Renderer: Draws the scene onto the canvas
                    const canvas = document.getElementById('three-canvas');
                    renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true });
                    renderer.setSize(window.innerWidth, window.innerHeight);
                    renderer.setPixelRatio(window.devicePixelRatio);

                    // 4. Geometries & Materials: Define shapes and appearances

                    // Cube (Original)
                    const cubeGeometry = new THREE.BoxGeometry(1.5, 1.5, 1.5);
                    const cubeMaterial = new THREE.MeshStandardMaterial({
                        color: 0x0077ff, // Blue
                        metalness: 0.3,
                        roughness: 0.5
                    });
                    cube = new THREE.Mesh(cubeGeometry, cubeMaterial);
                    cube.position.x = -2.5; // Position cube to the left
                    scene.add(cube);

                    // Sphere (New)
                    // SphereGeometry(radius, widthSegments, heightSegments)
                    const sphereGeometry = new THREE.SphereGeometry(1, 32, 16);
                    const sphereMaterial = new THREE.MeshStandardMaterial({
                        color: 0xff4400, // Orange
                        metalness: 0.1,
                        roughness: 0.7
                    });
                    sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);
                    sphere.position.x = 0; // Position sphere in the center
                    scene.add(sphere);

                    // Torus Knot (New)
                    // TorusKnotGeometry(radius, tubeRadius, tubularSegments, radialSegments, p, q)
                    const torusKnotGeometry = new THREE.TorusKnotGeometry(0.8, 0.3, 100, 16);
                    const torusKnotMaterial = new THREE.MeshStandardMaterial({
                        color: 0x00ff88, // Greenish
                        metalness: 0.6,
                        roughness: 0.4
                    });
                    torusKnot = new THREE.Mesh(torusKnotGeometry, torusKnotMaterial);
                    torusKnot.position.x = 2.5; // Position torus knot to the right
                    scene.add(torusKnot);

                    // 5. Lighting: Illuminate the scene
                    const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
                    scene.add(ambientLight);
                    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
                    directionalLight.position.set(5, 10, 7.5);
                    scene.add(directionalLight);

                    // 6. Controls: Allow user interaction
                    controls = new THREE.OrbitControls(camera, renderer.domElement);
                    controls.enableDamping = true;
                    controls.dampingFactor = 0.05;
                    controls.screenSpacePanning = false;
                    controls.minDistance = 3;
                    controls.maxDistance = 20; // Increased max distance slightly
                    controls.autoRotate = true; // Keep auto-rotation for the view
                    controls.autoRotateSpeed = 0.5; // Slightly slower auto-rotate

                    // 7. Handle Window Resizing
                    window.addEventListener('resize', onWindowResize, false);

                } catch (error) {
                    console.error("Initialization failed:", error);
                    const overlay = document.querySelector('.info-overlay');
                    if (overlay) {
                        overlay.textContent = "Error initializing 3D scene. Check console.";
                        overlay.style.backgroundColor = "rgba(200, 0, 0, 0.7)";
                    }
                }
            }

            // --- Handle Window Resize ---
            function onWindowResize() {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
                renderer.setPixelRatio(window.devicePixelRatio);
            }

            // --- Animation Loop ---
            function animate() {
                requestAnimationFrame(animate);

                // Update controls (handles damping and autoRotate)
                controls.update();

                // Add independent rotations to the objects
                if (cube) {
                    cube.rotation.x += 0.005;
                    cube.rotation.y += 0.005;
                }
                if (sphere) {
                    sphere.rotation.y += 0.008;
                }
                if (torusKnot) {
                    torusKnot.rotation.x -= 0.003;
                    torusKnot.rotation.y += 0.007;
                }

                // Render the scene
                renderer.render(scene, camera);
            }

            // --- Start ---
            init();
            if (renderer) { // Only start animation if init was successful
                 animate();
            }
        };
    </script>
</body>
</html>
